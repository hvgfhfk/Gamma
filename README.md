# Gamma Controller

Windows 디스플레이의 감마, 밝기, 대비를 실시간으로 조정하는 유틸리티입니다.

## 주요 기능

- 🎨 **감마/밝기/대비 조정**: NVIDIA, AMD, Intel GPU 모두 지원
- 🔧 **자동 조정 시스템**: 시스템에 맞는 최적의 감마 적용 방법 자동 탐색 및 저장
- ⌨️ **단축키 지원**: 커스텀 단축키로 빠르게 설정 전환
- 🔍 **프로세스 자동 감지**: 특정 프로그램 실행 시 자동으로 설정 적용
- 🚀 **자동 실행**: Windows 시작 시 자동 실행 옵션
- 💻 **다중 GPU 지원**: NVIDIA, AMD Radeon, Intel 내장 그래픽 모두 지원
- 📊 **시스템 진단**: 시스템 환경 정보 및 감마 램프 테스트 기능
- 📝 **고급 로깅**: 날짜/시간 기반 로그 파일, 시스템 정보 자동 기록
- 🖥️ **DDC/CI 지원**: 모니터 직접 제어를 통한 밝기/대비 조정 (GPU 드라이버 우회)

## 시스템 요구사항

- **운영체제**: Windows 7 SP1 이상 (Windows 10/11 권장)
- **.NET Framework**: 4.7.2 이상
- **권한**: 일반 사용자 권한 (일부 시스템에서는 관리자 권한 필요할 수 있음)
- **지원 GPU**: NVIDIA, AMD Radeon, Intel 내장 그래픽

## 설치 방법

1. `Gamma.exe` 파일을 원하는 위치에 복사
2. 더블클릭하여 실행
3. 설치 프로그램 불필요 - 포터블 애플리케이션

## 사용 방법

### 기본 사용법

1. **감마 설정 탭**: 스크롤바로 감마, 밝기, 대비 조정
   - 감마 범위: 0.2 ~ 3.0 (자동 조정됨)
   - 밝기 범위: 0% ~ 100%
   - 대비 범위: 0% ~ 100%
2. **단축키 탭**: 
   - 기본값 단축키: 기본 설정으로 복원
   - 변경값 단축키: 커스텀 설정 적용
3. **프로세스 탭**: 
   - 프로세스 추가 버튼으로 프로그램 추가
   - 특정 프로그램이 활성화되면 자동으로 설정 적용
4. **설정 탭**:
   - 컴퓨터 시작 시 자동 실행 설정
   - 시스템 환경 진단 실행
   - 후원 기능

### 단축키 설정

1. 단축키 탭에서 "기본값 단축키 설정" 또는 "변경값 단축키 설정" 버튼 클릭
2. 원하는 키 조합 입력 (예: Ctrl+Alt+G)
3. 설정 완료

### 프로세스 규칙 추가

1. 프로세스 탭에서 "프로세스 추가" 버튼 클릭
2. 실행 중인 프로세스 목록에서 선택
3. 감마, 밝기, 대비 값 설정
4. (선택) 프로세스별 단축키 설정

### 시스템 환경 진단

1. 설정 탭에서 "시스템 환경 진단" 버튼 클릭
2. 시스템 정보 확인:
   - 운영 체제 정보
   - .NET Framework 버전
   - GPU 정보 (드라이버 버전, 메모리)
   - 디스플레이 정보
   - 관리자 권한 상태
   - 자동 조정 저장된 방법
3. 감마 램프 테스트 실행

## 문제 해결

### 감마 조정이 적용되지 않는 경우

1. **관리자 권한으로 실행**: 
   - `Gamma.exe` 우클릭 → "관리자 권한으로 실행"
   - 특히 AMD GPU 사용 시 권장

2. **자동 조정 기능 활용**:
   - 프로그램이 자동으로 여러 방법을 시도하여 최적의 방법을 찾습니다
   - 성공한 방법은 자동으로 저장되어 다음 실행 시 재사용됩니다
   - 시스템 환경 진단에서 저장된 방법 확인 가능

3. **HDR 모드 확인**:
   - HDR 모드가 활성화된 경우 일부 기능이 제한될 수 있음
   - 시스템 환경 진단에서 HDR 상태 확인 가능

4. **로그 파일 확인**:
   - `Logs` 폴더의 `error_log_YYYY-MM-DD_HH-mm.txt` 파일 확인
   - 각 로그 파일에는 시스템 정보가 자동으로 포함됩니다
   - 오류 및 경고 메시지 확인

5. **AMD GPU 특별 사항**:
   - AMD 드라이버는 GDI32 API를 제한할 수 있습니다
   - 자동 조정 기능이 여러 방법을 시도하여 해결합니다
   - 관리자 권한으로 실행 시 성공률이 높아집니다

### 프로그램이 시작되지 않는 경우

1. `.NET Framework 4.7.2` 설치 확인
2. Windows 7 사용자는 [.NET Framework 4.7.2 다운로드](https://dotnet.microsoft.com/download/dotnet-framework/net472)
3. `Logs` 폴더의 로그 파일 확인

### 단축키가 작동하지 않는 경우

1. 다른 프로그램과 단축키 충돌 확인
2. 단축키 재등록 시도
3. 관리자 권한으로 실행

### 감마 값이 너무 낮은 경우

- 감마 값이 0.2 미만으로 설정되면 자동으로 0.2로 조정됩니다
- 이는 Windows API의 단조 증가 조건을 만족하기 위함입니다
- 경고 메시지가 표시됩니다

## 파일 구조

```
Gamma.exe              # 실행 파일
Gamma.exe.config       # 설정 파일
SETTING.JSON          # 사용자 설정 (자동 생성)
Logs/                 # 로그 폴더 (자동 생성)
  error_log_YYYY-MM-DD_HH-mm.txt  # 오류 로그 (날짜/시간별)
```

## 로그 시스템

- **로그 위치**: `Logs` 폴더
- **파일명 형식**: `error_log_YYYY-MM-DD_HH-mm.txt`
- **로그 내용**:
  - 시스템 정보 (파일당 최초 1회)
  - 오류 메시지
  - 경고 메시지
- **파일 생성 규칙**:
  - 프로그램 실행 시마다 새로운 파일 생성
  - 같은 날 같은 시간대에 재실행 시 새 파일 생성

## 기술 정보

- **개발 언어**: C# (WPF)
- **.NET Framework**: 4.7.2
- **API**: 
  - Windows GDI32 API (`SetDeviceGammaRamp`, `GetDeviceGammaRamp`)
  - Windows User32 API (`GetDC`, `CreateDC`, `ReleaseDC`)
  - DDC/CI API (`dxva2.dll`) - 밝기/대비 직접 제어
- **지원 GPU**: NVIDIA, AMD Radeon, Intel 내장 그래픽

## 자동 조정 시스템

프로그램은 감마 적용 실패 시 자동으로 다음 방법들을 시도합니다:

1. **DC 생성 방법**:
   - DeviceName 기반 `CreateDC`
   - DISPLAY 기반 `CreateDC`
   - DISPLAY1 기반 `CreateDC`
   - `GetDC` 사용

2. **감마 계산 방법**:
   - 참고 소스 방식 (AMD 최적화)
   - NVIDIA 공식 파이프라인
   - 표준 계산 방식

3. **성공한 방법 저장**:
   - 성공한 조합을 자동으로 저장
   - 다음 실행 시 저장된 방법 우선 사용
   - 시스템 환경 진단에서 확인 가능

## 단조 증가 보정

Windows API는 감마 램프 값이 단조 증가(각 값이 이전 값보다 커야 함)해야 합니다. 프로그램은 자동으로 이를 보정합니다:

- 순방향 보정: 각 값이 이전 값보다 크도록 조정
- 역방향 보정: 마지막 값(65535)을 유지하면서 단조 증가 보장
- 반복 보정: 최대 50회 반복하여 안정화

## 라이선스

Copyright © 2026

## 후원

프로그램이 도움이 되셨다면 후원해주세요! 설정 탭의 "커피한 잔 후원하기" 버튼을 통해 후원할 수 있습니다.

## 버전 정보

- **현재 버전**: 1.0.0.0
- **최종 업데이트**: 2026년 1월

## 주요 개선사항

### v1.0.0 (2026-01)

- ✅ AMD GPU 지원 추가
- ✅ 자동 조정 시스템 구현
- ✅ 시스템 환경 진단 기능 추가
- ✅ 개선된 로깅 시스템 (날짜/시간 기반 파일명, 시스템 정보 자동 기록)
- ✅ 단조 증가 보정 알고리즘 개선
- ✅ 낮은 감마 값 처리 개선 (최소 0.2)
- ✅ DDC/CI 지원 (모니터 직접 제어)
- ✅ 다중 GPU 감지 및 지원

## 문의 및 지원

문제가 발생하거나 제안사항이 있으시면 `Logs` 폴더의 로그 파일과 함께 문의해주세요.
